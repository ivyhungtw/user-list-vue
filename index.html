<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User List</title>
    <script src="https://unpkg.com/vue@next"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="style.css" />
    <script
      src="https://kit.fontawesome.com/fc38f96ac0.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div id="app">
      <header class="header">
        <!-- Nav Bar -->
        <nav class="navbar navbar-expand-lg navbar-light p-3">
          <div class="container-fluid">
            <a class="navbar-brand" href="#">Meet Friends</a>
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="#"
                    >Home</a
                  >
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="favorite.html">Favorite</a>
                </li>
              </ul>
              <form class="d-flex" id="search-form">
                <input
                  class="form-control me-2"
                  type="search"
                  id="search-input"
                  placeholder="Search by name..."
                  aria-label="Search"
                />
                <button
                  class="btn btn-outline-success"
                  type="submit"
                  id="search-submit-button"
                >
                  Search
                </button>
              </form>
            </div>
          </div>
        </nav>
        <!-- slides -->
        <div
          id="carouselExampleCaptions"
          class="carousel slide"
          data-bs-ride="carousel"
        >
          <ol class="carousel-indicators">
            <li
              data-bs-target="#carouselExampleCaptions"
              data-bs-slide-to="0"
              class="active"
            ></li>
            <li
              data-bs-target="#carouselExampleCaptions"
              data-bs-slide-to="1"
            ></li>
            <li
              data-bs-target="#carouselExampleCaptions"
              data-bs-slide-to="2"
            ></li>
          </ol>
          <div class="carousel-inner">
            <div class="carousel-item active">
              <img
                src="https://images.pexels.com/photos/935835/pexels-photo-935835.jpeg?cs=srgb&dl=pexels-vjapratama-935835.jpg&fm=jpg"
                class="d-block w-100"
                style="height: 700px; object-fit: cover"
                alt="..."
              />
              <div class="carousel-caption d-none d-sm-block">
                <h1>Meet Like-Minded People</h1>
                <p>
                  Nulla vitae elit libero, a pharetra augue mollis interdum.
                </p>
              </div>
            </div>
            <div class="carousel-item">
              <img
                src="https://images.pexels.com/photos/2672979/pexels-photo-2672979.jpeg?cs=srgb&dl=pexels-andrea-piacquadio-2672979.jpg&fm=jpg"
                class="d-block w-100"
                style="height: 700px; object-fit: cover"
                alt="..."
              />
              <div class="carousel-caption d-none d-sm-block">
                <h1>Make Friends Around the World</h1>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
              </div>
            </div>
            <div class="carousel-item">
              <img
                src="https://images.pexels.com/photos/3937468/pexels-photo-3937468.jpeg?cs=srgb&dl=pexels-andrea-piacquadio-3937468.jpg&fm=jpg"
                class="d-block w-100"
                style="height: 700px; object-fit: cover"
                alt="..."
              />
              <div class="carousel-caption d-none d-sm-block">
                <h1>Have a Dinner with Locals</h1>
                <p>
                  Praesent commodo cursus magna, vel scelerisque nisl
                  consectetur.
                </p>
              </div>
            </div>
          </div>
          <a
            class="carousel-control-prev"
            href="#carouselExampleCaptions"
            role="button"
            data-bs-slide="prev"
          >
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </a>
          <a
            class="carousel-control-next"
            href="#carouselExampleCaptions"
            role="button"
            data-bs-slide="next"
          >
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </a>
        </div>
      </header>
      <!-- User List -->
      <div class="container">
        <div></div>
        <div class="user-container row mx-auto mt-5">
          <div
            v-for="user in users"
            class="
              col-12 col-sm-6 col-lg-4 col-xl-3
              mb-4
              d-flex
              align-items-stretch
              justify-content-center
            "
          >
            <div class="card pb-2" style="width: 18rem">
              <div class="add mx-4 mt-2 d-flex justify-content-end">
                <i
                  class="
                    text-danger
                    far
                    fa-heart fa-lg
                    heart
                    mt-3
                    btn-add-favorite
                  "
                  @click="likeUser"
                  :data-id="user.login.uuid"
                ></i>
              </div>
              <div class="user-img d-flex justify-content-center px-5 py-3">
                <img
                  :src="user.picture.large"
                  class="
                    img-show-user
                    btn-show-user
                    rounded-circle
                    card-img-top
                    mx-auto
                    img-fluid
                  "
                  alt="..."
                  data-bs-toggle="modal"
                  data-bs-target="#user-modal"
                  :data-id="user.login.uuid"
                />
              </div>
              <div class="card-body d-flex flex-column justify-content-between">
                <div class="user-info">
                  <h5 class="card-title text-center">
                    {{user.name.first}} {{user.name.last}}
                    <i
                      v-if="user.gender === 'female'"
                      class="fas fa-venus ms-2"
                      :class="{'text-danger': user.gender === 'female'}"
                    ></i>
                    <i
                      v-else
                      class="fas fa-mars ms-2"
                      :class="{'text-primary': user.gender === 'male'}"
                    ></i>
                  </h5>
                </div>
                <div class="btn-container d-flex justify-content-center mt-2">
                  <button
                    class="btn btn-secondary btn-show-user me-3"
                    @click="getUserData"
                    data-bs-toggle="modal"
                    data-bs-target="#user-modal"
                    :data-id="user.login.uuid"
                  >
                    Info
                  </button>
                </div>
              </div>
            </div>
          </div>
          <!-- Modal -->
          <div
            class="modal fade"
            id="user-modal"
            tabindex="-1"
            aria-labelledby="user-modalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="user-modalLabel">
                    {{user.name}}
                  </h5>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                  ></button>
                </div>
                <div class="modal-body">
                  <div class="row">
                    <div
                      class="
                        col-md-4
                        d-flex
                        justify-content-center
                        align-items-center
                        ml-4
                      "
                      id="user-modal-img"
                    >
                      <img :src="user.img" alt="User Photo" />
                    </div>
                    <div class="col">
                      <ul
                        class="list-group list-group-flush"
                        id="user-modal-info"
                      >
                        <li class="list-group-item">Gender: {{user.gender}}</li>
                        <li class="list-group-item">
                          Nationality: {{user.nat}}
                        </li>
                        <li class="list-group-item">Age: {{user.age}}</li>
                        <li class="list-group-item">
                          Birthday: {{user.birthday}}
                        </li>
                        <li class="list-group-item">Email: {{user.email}}</li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-secondary"
                    data-bs-dismiss="modal"
                  >
                    Close
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="./index.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script>
      Vue.createApp({
        data() {
          return {
            users: [],
            usersMap: {},
            user: {}
          }
        },
        methods: {
          likeUser() {
            event.target.classList.toggle('far')
            event.target.classList.toggle('fas')
          },
          getUserData() {
            const userId = event.target.dataset.id
            this.user = this.usersMap[userId]
          }
        },
        async mounted() {
          const result = await axios.get(
            'https://randomuser.me/api/?inc=gender,name,nat,picture,email,login,dob&results=20&seed=foobar'
          )

          this.users = result.data.results
          this.users.forEach(
            user =>
              (this.usersMap[user.login.uuid] = {
                name: `${user.name.first} ${user.name.last}`,
                img: user.picture.large,
                nat: user.nat,
                email: user.email,
                gender: user.gender,
                birthday: user.dob.date.substring(
                  0,
                  user.dob.date.indexOf('T')
                ),
                age: user.dob.age
              })
          )
        }
      }).mount('#app')
    </script>
  </body>
</html>
